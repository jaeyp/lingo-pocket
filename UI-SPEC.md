# UI Specification - EnglishSurf

> 앱의 UI/UX 요구사항 및 설계 사양서

---

## 🔍 검토 대기 중인 항목들

나중에 시간 날 때 하나씩 검토하고 결정해주세요!

---

### ✅ 1. 리스트뷰 레이아웃 ✅ **확정**

**레이아웃:**
```
┌─────────────────────────────────────┐
│  English Surf [+]                   │ ← 타이틀, 추가
│  [EN→KO]                       [▶] │ ← 토글, 낱장보기
├─────────────────────────────────────┤
│  🔀 Random ▼   🎯 All ▼            │ ← Sort, Difficulty
├─────────────────────────────────────┤
│  ┌───────────────────────────────┐ │║
│  │ I'm looking forward to seeing │ │║
│  │ you.                          │ │║ ← 스크롤바
│  └───────────────────────────────┘ │║
│  ┌───────────────────────────────┐ │║
│  │ There's a lot of stuff you    │ │║
│  │ guys do that could ruin your  │ │║
│  │ trip.                         │ │║
│  └───────────────────────────────┘ │║
│  ┌───────────────────────────────┐ │║
│  │ I was willing to talk to      │ │║
│  │ anyone.                       │ │║
│  └───────────────────────────────┘ │║
│  ...                               │║
└─────────────────────────────────────┘
```

**확정 사항:**
- ✅ **세로 리스트** (한 줄에 카드 1개)
- ✅ **Endless List** (무한 스크롤)
- ✅ **스크롤바** 표시
- ✅ **카드 높이:** 문장 길이에 따라 가변 (전체 문장 표시)
- ✅ **Learning Mode:**
  - `EN → KO` (영어 학습) ← **기본값**
  - `KO → EN` (영어 작문)
- ✅ **Sort Options:**
  - `order` (사용자 지정 순서)
  - `difficulty` (난이도 순서)
  - `random` (랜덤) ← **기본값**
- ✅ **Difficulty Filter:**
  - `all` (전체)
  - `beginner` (초급)
  - `intermediate` (중급)
  - `advanced` (고급)

---

### ✅ 2. 카드 순서 변경 UI ✅ **확정**

**확정 사항:**
- ✅ **드래그 앤 드롭** 방식
- ✅ `ReorderableListView` 사용 (Flutter 기본 제공)
- ✅ 카드를 길게 누르면 드래그 가능
- ✅ 드래그 중 시각적 피드백 제공

**동작:**
```
1. 카드 길게 누르기
2. 드래그 핸들 표시
3. 원하는 위치로 드래그
4. 놓으면 order 자동 업데이트
```

---

### ✅ 3. ID vs Order 필드 ✅ **확정**

**확정 사항:**
- ✅ **별도 order 필드 추가**
- ✅ `id`: 영구적인 고유 식별자 (변경 안 함)
- ✅ `order`: 표시 순서 (변경 가능)

**JSON 구조:**
```json
{
  "id": 5,      // 고유 식별자 (절대 변경 안 함)
  "order": 1,   // 표시 순서 (드래그로 변경 가능)
  "sentence": "...",
  "translation": "...",
  "difficulty": "beginner",
  "examples": [],
  "notes": ""
}
```

**Freezed 모델 업데이트 필요:**
```dart
@freezed
class Sentence with _$Sentence {
  const factory Sentence({
    required int id,
    required int order,        // ← 추가
    required String sentence,
    required String translation,
    required String difficulty,
    @Default([]) List<String> examples,
    @Default('') String notes,
  }) = _Sentence;
}
```

**장점:**
- ✅ ID는 영구적 → 학습 진도 추적 가능
- ✅ order만 변경 → 안전하고 명확

---

### ✅ 4. 카드 뷰 버튼 배치 ✅ **확정**

**확정 사항:**
- ✅ 버튼을 **AppBar로 이동**
- ✅ **좌측:** [✏️] [🗑️] (수정/삭제)
- ✅ **우측:** [×] (닫기)
- ✅ **카드 전체 터치 → 앞/뒤 뒤집기**

**UI 디자인:**

**앞면:**
```
┌─────────────────────────────────┐
│ [✏️][🗑️]              [×]      │ ← AppBar
├─────────────────────────────────┤
│                                 │
│  ┌───────────────────────────┐ │
│  │  I'm looking forward to   │ │ ← 전체 터치 가능
│  │    seeing you.            │ │   (카드 뒤집기)
│  └───────────────────────────┘ │
│                                 │
│      💡 Tap to see answer      │
└─────────────────────────────────┘
```

**뒷면:**
```
┌─────────────────────────────────┐
│ [✏️][🗑️]              [×]      │ ← AppBar
├─────────────────────────────────┤
│  ┌───────────────────────────┐ │
│  │ 당신을 만나기를 기대하고  │ │
│  │ 있어요.                   │ │
│  │                           │ │
│  │ Difficulty: beginner      │ │
│  │                           │ │
│  │ Examples:                 │ │
│  │ - I'm looking forward...  │ │
│  │                           │ │
│  │ Notes:                    │ │
│  │ look forward to + ~ing    │ │
│  └───────────────────────────┘ │
│                                 │
│      💡 Tap to flip back       │
└─────────────────────────────────┘
```

**장점:**
- ✅ 터치 영역 명확 (버튼과 충돌 없음)
- ✅ 표준 플래시카드 UX
- ✅ 더 큰 카드 표시 가능

**추가 기능:**
- ✅ **화면 방향 대응** (Portrait / Landscape)
  - 세로 모드: 위 디자인 그대로
  - 가로 모드: 카드 가로로 확장, 더 넓게 표시

**Landscape 모드 (가로):**
```
┌─────────────────────────────────────────────────┐
│ [✏️][🗑️]                              [×]      │
├─────────────────────────────────────────────────┤
│                                                 │
│  ┌───────────────────────────────────────────┐ │
│  │                                           │ │
│  │     I'm looking forward to seeing you.    │ │
│  │                                           │ │
│  └───────────────────────────────────────────┘ │
│                                                 │
│              💡 Tap to see answer              │
└─────────────────────────────────────────────────┘
```

**Flutter 구현:**
- `OrientationBuilder` 사용
- 또는 `MediaQuery.of(context).orientation` 체크
- Portrait/Landscape에 따라 레이아웃 자동 조정

---

### ✅ 5. 편집 폼 필드 ✅ **확정**

**확정 사항:**
- ✅ **모든 필드 표시**
- ✅ 스크롤 가능한 폼

**UI 디자인:**
```
┌─────────────────────────────────┐
│  Add Card                [×]    │ ← AppBar
├─────────────────────────────────┤
│  Key Sentence:                  │
│  [________________________]     │
│                                 │
│  Translation:                   │
│  [________________________]     │
│                                 │
│  Difficulty:                    │
│  [beginner ▼]                   │
│                                 │
│  Examples:                      │
│  [+ Add Example]                │
│                                 │
│  Notes:                         │
│  [________________________]     │
│                                 │
│  [Save] [Cancel]                │
└─────────────────────────────────┘
```

**필드 목록:**
1. ✅ `sentence` (핵심 문장) - 필수, 여러 줄
2. ✅ `translation` (번역) - 필수, 여러 줄
3. ✅ `difficulty` (난이도) - 드롭다운
4. ✅ `examples` (예문) - 리스트, 추가/삭제 가능
5. ✅ `notes` (노트) - 선택, 여러 줄

---

### ✅ 6. 하이라이팅 입력 UX ✅ **확정**

**확정 사항:**
- ✅ **텍스트 선택 + 버튼** 방식
- ✅ 실시간 미리보기

**UI 디자인:**
```
┌─────────────────────────────────┐
│  Key Sentence:                  │
│  ┌───────────────────────────┐ │
│  │ I'm looking forward to    │ │ ← TextField
│  │ seeing you.               │ │
│  └───────────────────────────┘ │
│  [B] [H]                        │ ← Bold, Highlight
│                                 │
│  Preview:                       │
│  I'm looking forward to seeing  │ ← Rendered
│  you.                           │
└─────────────────────────────────┘
```

**동작:**
```
1. 텍스트 선택 (예: "looking forward to")
2. [H] 버튼 클릭
3. 자동으로 |looking forward to| 삽입
4. 미리보기에서 하이라이트 표시 확인
```

**버튼:**
- [B] - Bold: `**text**`
- [H] - Highlight: `|text|`
- [B+H] - Both: `|**text**|` (선택 사항)

---

### ✅ 7. 복사/붙여넣기 ✅ **확정**

**확정 사항:**
- ✅ **iOS/Android 네이티브 방식 사용**
- ✅ 시스템 클립보드 사용
- ✅ 별도 커스텀 UI 없음

**동작:**
```
1. 텍스트 길게 누르기 또는 더블탭
   ↓
2. 선택 범위 조정 (파란 핸들)
   ↓
3. [Cut] [Copy] [Paste] 메뉴 자동 표시
   ↓
4. 시스템 클립보드에 복사/붙여넣기
```

**Flutter 구현:**
- ✅ `TextField` - 입력 필드 (자동 지원)
- ✅ `SelectableText` - 읽기 전용 (카드 뷰)
- ✅ 기본 동작 활용, 커스텀 불필요

---

### ✅ 8. 카드 낱장보기 모드 ✅ **확정**

**개요:**
- 리스트에서 [▶] 버튼 클릭
- 현재 Sort + Difficulty 설정 유지
- 카드를 한 장씩 전체화면으로 표시

**확정 사항:**

**1. 순서/필터**
- ✅ **Sort 모드 따름**
  - `random`: 랜덤 순서
  - `id`: ID 순서
  - `difficulty`: 난이도 순서
- ✅ **Difficulty 필터 따름**
  - 리스트뷰에서 선택한 난이도만 표시

**2. 네비게이션**
- ✅ **[이전]/[다음] 버튼**
- ✅ **스와이프 제스처**
  - 좌로 스와이프: 다음 카드
  - 우로 스와이프: 이전 카드
- ✅ **진행률 표시** (예: 5/20)

**3. 기타**
- ✅ [×] 버튼으로 종료 → 리스트뷰 복귀
- ✅ 카드 터치로 앞/뒤 뒤집기
- ❌ "알았음/모름" 표시 안 함

**UI 디자인:**

**낱장보기 모드 - 앞면:**
```
┌─────────────────────────────────┐
│  (5/20)                    [×] │ ← 진행률(좌), 닫기(우)
├─────────────────────────────────┤
│                                 │
│  ┌───────────────────────────┐ │
│  │                           │ │
│  │  I'm looking forward to   │ │ ← 터치로 뒤집기
│  │    seeing you.            │ │   스와이프로 이동
│  │                           │ │
│  └───────────────────────────┘ │
│                                 │
│      💡 Tap to see answer      │
│                                 │
│  ← [Prev]          [Next] →    │ ← 버튼
└─────────────────────────────────┘
```

**낱장보기 모드 - 뒷면:**
```
┌─────────────────────────────────┐
│  (5/20)                    [×] │
├─────────────────────────────────┤
│  ┌───────────────────────────┐ │
│  │ 당신을 만나기를 기대하고  │ │
│  │ 있어요.                   │ │
│  │                           │ │
│  │ Difficulty: beginner      │ │
│  │                           │ │
│  │ Examples:                 │ │
│  │ - I'm looking forward...  │ │
│  │                           │ │
│  │ Notes:                    │ │
│  │ look forward to + ~ing    │ │
│  └───────────────────────────┘ │
│                                 │
│  ← [Prev]          [Next] →    │
└─────────────────────────────────┘
```

**동작 예시:**
```
리스트뷰 설정:
- Sort: Random
- Difficulty: beginner

[▶] 버튼 클릭
    ↓
beginner 카드들만 랜덤 순서로 한 장씩 표시
```

---

## 📝 추가 기능

### ✅ 학습 모드 (역방향 학습) ✅ **확정**

**개요:**
- 영어만 보고 학습 ↔ 한국어 보고 영어 추론
- 두 가지 모드 전환 가능

**확정 사항:**

**1. 모드 옵션**
- ✅ `EN → KO` (영어 학습) - 기본값
- ✅ `KO → EN` (영어 작문/추론)
- ❌ `Random` 제외

**2. 모드 선택 UI**
- ✅ **토글 버튼** (리스트 화면 상단)
  - 클릭 시 즉시 전환: `[EN→KO]` ↔ `[KO→EN]`
  - 드롭다운 메뉴 없음, 한 번 클릭으로 전환
- ✅ **마지막 모드 기억** (SharedPreferences)
  - 앱 종료 후 재시작해도 유지

**3. 다국어 지원**
- ✅ **한국어만 우선 지원**
- ✅ JSON: `translation` (String) - `translations` (Map) 아님
- ⏳ 나중에 필요하면 다국어 확장

**4. 리스트뷰 표시**
- ✅ 모드에 따라 앞면 텍스트만 표시
  - `EN→KO`: 영어 문장
  - `KO→EN`: 한국어 번역

**UI 디자인:**

**리스트 화면:**
```
┌─────────────────────────────────────┐
│  English Surf [+]                   │ ← 타이틀, 추가
│  [EN→KO]                       [▶] │ ← 토글 버튼, 낱장보기
├─────────────────────────────────────┤
│  🔀 Random ▼   🎯 All ▼            │
├─────────────────────────────────────┤
│  ┌───────────────────────────────┐ │
│  │ I'm looking forward to...     │ │ ← EN→KO 모드
│  └───────────────────────────────┘ │
│  ┌───────────────────────────────┐ │
│  │ 당신을 만나기를 기대하고...   │ │ ← KO→EN 모드
│  └───────────────────────────────┘ │
└─────────────────────────────────────┘

[EN→KO] 클릭 시:
→ [KO→EN]로 즉시 전환
```

**카드 뷰 - EN→KO 모드:**
```
앞면: I'm looking forward to seeing you.
뒷면: 당신을 만나기를 기대하고 있어요. + 상세정보
```

**카드 뷰 - KO→EN 모드:**
```
앞면: 당신을 만나기를 기대하고 있어요.
뒷면: I'm looking forward to seeing you. + 상세정보
```

**JSON 구조 변경 (필요):**

**Before (현재):**
```json
{
  "id": 1,
  "sentence": "I'm looking forward to seeing you.",
  "translations": {
    "ko": "당신을 만나기를 기대하고 있어요."
  }
}
```

**After (변경 필요):**
```json
{
  "id": 1,
  "sentence": "I'm looking forward to seeing you.",
  "translation": "당신을 만나기를 기대하고 있어요."
}
```

**Freezed 모델 변경:**
```dart
@freezed
class Sentence with _$Sentence {
  const factory Sentence({
    required int id,
    required String sentence,
    required String translation,  // ← Map에서 String으로
    required String difficulty,
    @Default([]) List<String> examples,
    @Default('') String notes,
  }) = _Sentence;
}
```

---

### 리스트뷰 UI 조정

(여기에 작성)

---

### 기타 조정/개선사항

(여기에 작성)

---

## ✅ 최종 결정사항 (검토 완료 후 작성)

검토가 완료되면 여기에 최종 결정사항을 정리합니다.

---

**작성일:** 2025-12-04
**최종 수정일:** 2025-12-04
